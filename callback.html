<!DOCTYPE html>
<html>
<head>
  <title>Key Callback | XZuyaX HUB</title>
  <script src="https://www.gstatic.com/firebasejs/11.9.1/firebase-app-compat.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #101020;
      color: white;
      text-align: center;
      padding: 50px;
    }
    .success {
      background: #00c853;
      padding: 15px 30px;
      border-radius: 10px;
      margin-top: 20px;
    }
    .fail {
      background: #b71c1c;
      padding: 15px 30px;
      border-radius: 10px;
      margin-top: 20px;
    }
    .button {
      margin-top: 30px;
      background: #6200ea;
      padding: 15px 25px;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>üîÑ Verifying your key...</h1>
  <div id="status">Checking...</div>
  <button id="toRobloxBtn" class="button" style="display:none;">‚û°Ô∏è Open Roblox</button>

  <script>
    // Ambil HWID dari URL
    const params = new URLSearchParams(window.location.search);
    const hwid = params.get("hwid");
    const statusEl = document.getElementById("status");
    const robloxBtn = document.getElementById("toRobloxBtn");

    if (!hwid) {
      statusEl.innerHTML = '<div class="fail">‚ùå HWID not found in URL.</div>';
      throw new Error("HWID missing");
    }

    // Kirim ke PHP backend untuk proses
    fetch("https://xzuyax.com/verify.php", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        hwid: hwid,
        duration: 24 // durasi jam (default 24 jam)
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.status === "success") {
        const dateStr = new Date(data.expires * 1000).toLocaleString();
        statusEl.innerHTML = `<div class="success">‚úÖ Key activated!<br>Valid until:<br><b>${dateStr}</b></div>`;
        robloxBtn.style.display = "inline-block";
      } else {
        statusEl.innerHTML = `<div class="fail">‚ùå Failed: ${data.message}</div>`;
      }
    })
    .catch(err => {
      statusEl.innerHTML = `<div class="fail">‚ùå Error: ${err.message}</div>`;
    });

    robloxBtn.onclick = () => {
      window.location.href = "roblox://";
    };
  </script>
</body>
</html>
